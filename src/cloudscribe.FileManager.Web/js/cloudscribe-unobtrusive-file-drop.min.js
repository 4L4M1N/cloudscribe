!function(){document.addEventListener("DOMContentLoaded",function(){for(var e=document.querySelectorAll("[data-dropzone]"),a='<div class="dz-preview dz-file-preview"><div class="dz-image"><img data-dz-thumbnail /></div><div class="dz-details collapse"><div class="dz-size collapse"><span data-dz-size></span></div><div class="dz-filename collapse"><span data-dz-name></span></div></div><div class="dz-progress collapse"><span class="dz-upload" data-dz-uploadprogress></span></div><div class="dz-error-message collapse"><span data-dz-errormessage></span></div><div class="dz-success-mark collapse"></div><div class="dz-error-mark collapse"></div></div>',d={buildDropZone:function(e){var d=t.getElementsByTagName("img")[0],s=new Dropzone("#"+e.id,{url:e.dataset.uploadUrl,method:"post",headers:{"X-CSRFToken":e.dataset.antiForgeryToken},maxFiles:1,acceptedFiles:e.dataset.acceptedFiles,previewTemplate:a,createImageThumbnails:!1})
s.on("sending",function(a,d,s){s.append("maxWidth",e.dataset.resizeWidth),s.append("maxHeight",e.dataset.resizeHeight),e.dataset.targetPath&&s.append("targetPath",e.dataset.targetPath)}),s.on("success",function(a,t){s.removeFile(a)
var i=t[0].resizedUrl
if(d&&(d.src=i),e.dataset.targetInputId){var l=document.getElementById(e.dataset.targetInputId)
l&&(l.value=i)}})}},s=0;s<e.length;s++){var t=e[s],i=t.getElementsByTagName("img")[0]
d.buildDropZone(t,i)}})}()
