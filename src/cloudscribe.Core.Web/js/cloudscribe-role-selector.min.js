var roleSelector={modalSelector:"#roledialog",targetSelector:"#hdnSelected",prepareModal:function(e,o){this.modalSelector="#"+e,this.targetSelector="#"+o
var t=$("<div/>",{id:e,"class":"modal fade",tabindex:"-1"})
$(document.body).append(t),$(this.modalSelector).on("show.bs.modal",function(e){roleSelector.syncChanges()})},clearModal:function(){$(this.modalSelector).remove()},openModal:function(){var e=$(this.modalSelector)
e.modal({show:!0,backdrop:!0}),e.on("hidden.bs.modal",function(){$(this).removeData("bs.modal"),roleSelector.clearModal()}),roleSelector.bindClose()},bindClose:function(){$(".closeModal").click(function(){$(this).closest(".modal").modal("hide")})},syncChanges:function(){var e,o=$(roleSelector.targetSelector).val()
e=o?o.split(","):[]
for(var t=0;t<e.length;t++){var l=e[t]
$(roleSelector.modalSelector+" input:checkbox[data-rolename='"+l+"']").attr("checked","checked")}$(roleSelector.modalSelector+" input:checkbox").change(function(){var o=$(":checkbox:not(checked)").map(function(){return $(this).data("rolename")}).get(),t=$(e).not(o).get()
e=t
var l=$(":checkbox:checked").map(function(){return $(this).data("rolename")}).get(),r=roleSelector.uniqueMerge(e,l)
$(roleSelector.targetSelector).val(r.join(","))})},uniqueMerge:function(e,o){for(var t={},l=[],r=0;r<e.length;r++)t[e[r]]!==!0&&(t[e[r]]=!0,l[l.length]=e[r])
for(var r=0;r<o.length;r++)t[o[r]]!==!0&&(t[o[r]]=!0,l[l.length]=o[r])
return l}}
